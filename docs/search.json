[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Colleen Hoskins",
    "section": "",
    "text": "Hi! I am Colleen, a graduate student studying water resources at Colorado State University. I am passionate about water sustainability and ecosystem conservation. On this site, you’ll find a watershed analysis of Trout Creek Watershed in Lake Tahoe, CA. This project highlights my interests in R coding, hydaulic analysis, and data visualization."
  },
  {
    "objectID": "projects.html",
    "href": "projects.html",
    "title": "Trout Creek Watershed",
    "section": "",
    "text": "Trout Creek was historically one of the most productive fisheries in the Tahoe Basin. In 1859, logging began in the Trout Creek Area. During the logging period, 13 miles of railroad, 16 miles of wagon haul roads, 2 miles of “V” flume and 28 logging camps were constructed in the Trout Creek watershed, causing erosion along Trout Creek and Saxton Creek (TRCD, 2013). Post-logging, the Trout Creek watershed was used to graze cattle and sheep. During this time, a ditch system and a series of small dams were developed along the tributaries of Trout Creek and Cold Creek (TRCD, 2013). Excessive grazing degraded watershed conditions. In 1996, the dams were removed from Cold Creek (California Tahoe Conservancy, 2022). Since 1996, projects within the Trout Creek watershed were conducted to restore the watershed to its historic condition. In 2021, the Caldor Fire burned areas within the Trout Creek Watershed, affecting the watershed’s streams (California Tahoe Conservancy, 2022). Moving forward, plans are being developed for restoration projects in several sections of Trout Creek and Cold Creek.  \nThis analysis compares flow and components of the water budget for the pre-restoration period before 1996 and the restoration period from 1996 onward."
  },
  {
    "objectID": "projects.html#daily-discharge",
    "href": "projects.html#daily-discharge",
    "title": "Trout Creek Watershed",
    "section": "Daily Discharge",
    "text": "Daily Discharge\n@trout_creek displays daily discharge for Trout Creek watershed for water years 1960-2023\n\n\nCode\n# Install and load necessary packages\nsource('data/setup.R')\n\n# Create a table for stream gauge\ntrout_creek_table &lt;- tibble(site_no = '10336780', gauge = 'Trout Creek')\n\n# Get data from USGS\ntrout_creek &lt;- readNWISdv(\n  siteNumber = trout_creek_table$site_no,\n  parameterCd = '00060',\n  startDate = \"1960-10-01\",\n  endDate = \"2024-09-30\"\n) %&gt;%\n  renameNWISColumns() %&gt;%\n  left_join(trout_creek_table, by = 'site_no') %&gt;%\n  select(-'Flow_cd')\n\n# Convert discharge from cfs to mm/day (drainage area is 36.7 square miles)\ntrout_creek &lt;- trout_creek %&gt;%\n  mutate(Q_mm = Flow * 86400 / 36.7 / 5280 / 5280 * 304.8)\n\n# Calculate water years\ntrout_creek &lt;- trout_creek %&gt;%\n  mutate(\n    month = month(Date),\n    wyear = if_else(month &gt; 9, year(Date) + 1, year(Date))\n  )\n\n# Separate into periods to analyze: the pre-restoration period is before 1996.\n# The restoration period is equal to and following 1996.\n# Calculate annual totals for Q\nQ_annual &lt;- trout_creek %&gt;%\n  mutate(group = ifelse(wyear &lt; 1996, \"pre-restoration\", \"restoration\")) %&gt;%\n  group_by(group, wyear) %&gt;%\n  summarize(Q_mm = sum(Q_mm), count = n())\n\n# Graph annual discharge with a scatter plot\nQ &lt;- Q_annual %&gt;%\n  ggplot(mapping = aes(x = wyear, y = Q_mm, color = group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"Annual Q (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\nggplotly()\n\n\n\n\nAnnual Discharge\n\n\n@Q_annual\n\n\nCode\n# Graph annual discharge with a box plot\nQ_box &lt;- Q_annual %&gt;%\n  ggplot(mapping = aes(x = group, y = Q_mm, fill = group)) +\n  geom_boxplot() +\n  theme_bw() +\n  labs(x = \"\", y = 'Q (mm)') +\n  guides(fill = guide_legend(title = NULL))\n\n# Graph annual discharge with a violin plot\nQ_violin &lt;- Q_annual %&gt;%\n  ggplot(mapping = aes(x = group, y = Q_mm, fill = group)) +\n  geom_violin() +\n  theme_bw() +\n  labs(x = \"\", y = 'Q (mm)') +\n  guides(fill = guide_legend(title = NULL))\n\n# Plot daily discharge\nQ_daily &lt;- trout_creek %&gt;%\n  mutate(group = ifelse(wyear &lt; 1996, \"pre-restoration\", \"restoration\")) %&gt;%\n  ggplot(mapping = aes(x = wyear, y = Q_mm, color = group)) +\n  geom_line() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"Daily Q (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n# Stitch plots together\nggarrange(Q_violin, Q_box, Q_daily, Q, ncol = 2, nrow = 2, common.legend = TRUE, legend = \"bottom\")\n\n\n\n\n\n\n\n\n\n\n\nCode\n#Calculate flow duration curve:\n#exceedance probability (p) = rank/n+1\npre_restoration &lt;- trout_creek %&gt;%\n  filter(wyear &lt; 1996) %&gt;%\n  mutate(\n    group='pre-restoration',\n    rank=rank(Flow),\n    p=rank/12784 \n  )\n\nrestoration &lt;- trout_creek %&gt;%\n  filter(wyear &gt;= 1996) %&gt;%\n  mutate(\n    group='restoration',\n    rank=rank(Flow),\n    p=rank/10594 \n  )\n\nfdc=rbind(pre_restoration,restoration)\n\n#Plot fcd\nfdc_plot &lt;- fdc %&gt;%\n  ggplot(mapping=aes(x=p,y=Flow,color=group, linetype=group))+\n  geom_line()+\n  theme_bw()+\n  labs(x = \"Exceedance Probability (p)\",y = \"Flow (cfs)\") +\n  guides(color = guide_legend(title = NULL),\n         linetype = guide_legend(title = NULL))\n\nggplotly()\n\n\n\n\n\n\n\n\nCode\n#Plot fdc scale_y_log10() to better visualize data\n#Optional: can put limits within the log; example: scale_y_log10(100,1000)\nfdc_plot_log &lt;- fdc %&gt;%\n  ggplot(mapping=aes(x=p,y=Flow,color=group, linetype=group))+\n  scale_y_log10()+\n  geom_line()+\n  theme_bw()+\n  labs(x = \"Exceedance Probability (p)\",y = \"Flow (cfs) - Log 10\") +\n  guides(color = guide_legend(title = NULL),\n         linetype = guide_legend(title = NULL))\n\nggplotly()\n\n\n\n\n\n\n\n\nCode\n# Read CSV files for P, ET, SM, and SWE:\nP_TC &lt;- read.csv('data/TC_Precip_Gridmet.csv')\nET_TC &lt;- read.csv('data/TC_ET_Gridmet.csv')\nSM_TC &lt;- read.csv('data/TC_SM_10_40_Wildas.csv')\nSWE_TC &lt;- read.csv('data/TC_SWE_Wildas.csv')\n\n# Filter Q_1981 based on the year range\nQ_1981 &lt;- trout_creek %&gt;%\n  filter(wyear &gt;= 1981 & wyear &lt;= 2023)\n\n# Convert Date Format\nP_TC$Date = mdy(P_TC$Date)\n\n# Join P_TC with Q_1981\nP_TC &lt;- P_TC %&gt;%\n  left_join(Q_1981 %&gt;% select(Date, Q_mm, wyear), by = \"Date\")\n\n# Bind Other Variables\nP_TC$ET_mm = ET_TC$ET_mm\nP_TC$SM_mm = SM_TC$SM_mm\nP_TC$SWE_mm = SWE_TC$SWE_mm\n\n#Separate Pre-restoration and Restoration Periods\nTC_climate &lt;- P_TC %&gt;%\n  mutate(\n    group = case_when(\n      wyear &lt; 1996 ~ \"pre-restoration\",\n      wyear &gt;= 1996 ~ \"restoration\"))\n\n#Calculate Annual Trends\nclimate_annual &lt;- TC_climate %&gt;%\n  group_by(wyear,group) %&gt;%\n  summarize(P_mm=sum(P_mm),\n            Q_mm=sum(Q_mm),\n            ET_mm=sum(ET_mm),\n            peakSWE=max(SWE_mm),\n            meanSM=mean(SM_mm))\n\n\n`summarise()` has grouped output by 'wyear'. You can override using the\n`.groups` argument.\n\n\nCode\n#Plot Annual Sum Q\nQ_1981 &lt;- Q_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=Q_mm,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"Q (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Sum P\nP &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=P_mm,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"P (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Sum ET\nET &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=ET_mm,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"ET (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Peak SWE\nSWE &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=peakSWE,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"SWE (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Mean SM\nSM &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=meanSM,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"SM (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\nggarrange(P,ET,SWE,SM,Q_1981, ncol=2,nrow=3, common.legend = TRUE, legend = \"bottom\")\n\n\n\n\n\n\n\n\n\n\n\nCode\n#Calculate monthly mean for P, Q, ET, SWE, and SM. For the flux variables P, Q and ET, calculate monthly sums before averaging: \n\nmonthly_mean_flux &lt;- TC_climate %&gt;%\n  mutate(month=month(Date)) %&gt;%\n  group_by(month, group, wyear) %&gt;%\n  summarize(\n    Q_mm_sum = sum(Q_mm),\n    P_mm_sum = sum(P_mm),\n    ET_mm_sum = sum(ET_mm)) %&gt;%\n   summarize(\n    Q_mm = mean(Q_mm_sum),\n    P_mm = mean(P_mm_sum),\n    ET_mm = mean(ET_mm_sum))\n\n\n`summarise()` has grouped output by 'month', 'group'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'month'. You can override using the\n`.groups` argument.\n\n\nCode\nmonthly_mean_stock &lt;- TC_climate %&gt;%\n  mutate(month=month(Date)) %&gt;%\n  group_by(month,group) %&gt;%\n  summarize(\n    SWE_mm = mean(SWE_mm),\n    SM_mm = mean(SM_mm))\n\n\n`summarise()` has grouped output by 'month'. You can override using the\n`.groups` argument.\n\n\nCode\n#Plot Mean Monthly SWE\nSWE_mean_plot &lt;- monthly_mean_stock %&gt;%\n  ggplot(mapping = aes(x = month, y = SWE_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"SWE (mm)\", color = \"Group\", linetype = \"Group\")\n\n#Plot Mean Monthly ET\nET_mean_plot &lt;- monthly_mean_flux %&gt;%\n  ggplot(mapping = aes(x = month, y = ET_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"ET (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\n#Plot Mean Monthly SM\nSM_mean_plot &lt;- monthly_mean_stock %&gt;%\n  ggplot(mapping = aes(x = month, y = SM_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"SM (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\n#Plot Mean Monthly P\nP_mean_plot &lt;- monthly_mean_flux %&gt;%\n  ggplot(mapping = aes(x = month, y = P_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"P (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\n#Plot Mean Monthly Q\nQ_mean_plot &lt;- monthly_mean_flux %&gt;%\n  ggplot(mapping=aes(x=month,y=Q_mm,color=group, linetype = group)) +\n  geom_line()+\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"Q (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\nggarrange(\n  P_mean_plot, ET_mean_plot, Q_mean_plot, SM_mean_plot, SWE_mean_plot, \n  ncol = 2, nrow = 3,\n  common.legend = TRUE,  \n  legend = \"bottom\")"
  },
  {
    "objectID": "projects.html#history",
    "href": "projects.html#history",
    "title": "Trout Creek Watershed",
    "section": "",
    "text": "Trout Creek was historically one of the most productive fisheries in the Tahoe Basin. In 1859, logging began in the Trout Creek Area. During the logging period, 13 miles of railroad, 16 miles of wagon haul roads, 2 miles of “V” flume and 28 logging camps were constructed in the Trout Creek watershed, causing erosion along Trout Creek and Saxton Creek (TRCD, 2013). Post-logging, the Trout Creek watershed was used to graze cattle and sheep. During this time, a ditch system and a series of small dams were developed along the tributaries of Trout Creek and Cold Creek (TRCD, 2013). Excessive grazing degraded watershed conditions. In 1996, the dams were removed from Cold Creek (California Tahoe Conservancy, 2022). Since 1996, projects within the Trout Creek watershed were conducted to restore the watershed to its historic condition. In 2021, the Caldor Fire burned areas within the Trout Creek Watershed, affecting the watershed’s streams (California Tahoe Conservancy, 2022). Moving forward, plans are being developed for restoration projects in several sections of Trout Creek and Cold Creek."
  },
  {
    "objectID": "projects.html#introduction",
    "href": "projects.html#introduction",
    "title": "Trout Creek Watershed",
    "section": "",
    "text": "Trout Creek was historically one of the most productive fisheries in the Tahoe Basin. In 1859, logging began in the Trout Creek Area. During the logging period, 13 miles of railroad, 16 miles of wagon haul roads, 2 miles of “V” flume and 28 logging camps were constructed in the Trout Creek watershed, causing erosion along Trout Creek and Saxton Creek (TRCD, 2013). Post-logging, the Trout Creek watershed was used to graze cattle and sheep. During this time, a ditch system and a series of small dams were developed along the tributaries of Trout Creek and Cold Creek (TRCD, 2013). Excessive grazing degraded watershed conditions. In 1996, the dams were removed from Cold Creek (California Tahoe Conservancy, 2022). Since 1996, projects within the Trout Creek watershed were conducted to restore the watershed to its historic condition. In 2021, the Caldor Fire burned areas within the Trout Creek Watershed, affecting the watershed’s streams (California Tahoe Conservancy, 2022). Moving forward, plans are being developed for restoration projects in several sections of Trout Creek and Cold Creek.  \nThis analysis compares flow and components of the water budget for the pre-restoration period before 1996 and the restoration period from 1996 onward."
  },
  {
    "objectID": "projects.html#watershed-characteristics",
    "href": "projects.html#watershed-characteristics",
    "title": "Trout Creek Watershed",
    "section": "Watershed Characteristics",
    "text": "Watershed Characteristics\nThe Trout Creek Watershed is located on the southern side of Lake Tahoe, California, adjacent to the Nevada state border (Figure 1). The main water features include Saxton Creek, Cold Creek, Trout Creek and Heavenly Valley Creek. These features converge into the main channel of Trout Creek, which flows north before draining into Lake Tahoe. The drainage area above the stream gauge is 36.7 square miles (Table 1).\nThe highest elevation of Trout Creek Watershed Is 10878 feet and the minimum elevation at the stream gauge is 6261 feet. The mean slope of the watershed is 30.1%, with steep, mountainous terrain in the southern region that becomes flatter toward the northern part as it nears the lake. The largest listed land cover type in the area is forest, which covers 43.1% of the watershed (Table 1). Urban land covers 3.1%, and lakes and ponds cover less than 1% of the area. Other land cover types are not specified by Web Soil Survey. Soils in the watershed are dominantly composed of various types of sand, including loamy, cobbly, coarse, gravelly, and stony sands, along with combinations of these textures (Table 2). They are primarily classified as excessively well-drained.\n\nTable 1: Characteristics of the Trout Creek watershed.\n\n\nParameter Description\nValue\n\n\n\n\ndrainage area\n36.7 mi²\n\n\nmean basin slope computed from 30 m DEM\n30.1 %\n\n\nmean basin elevation\n7932 ft\n\n\nmaximum basin elevation\n10878 ft\n\n\nminimum basin elevation\n6261 ft\n\n\narea covered by forest\n43.1 %\n\n\narea covered by lakes and ponds\n0.08881 %\n\n\narea of developed (urban) land\n3.1 %\n\n\n\n\nTable 2: Characteristics of major soil types of the Trout Creek watershed.\n\n\n\n\n\n\n\n\nSoil Series\nPrimary Texture\nDrainage Class\nKsat\n\n\n\n\nCassenai\ngravelly loamy coarse sand, cobbly loamy coarse sand, gravelly coarse sand\nsomewhat excessively drained\nhigh\n(1.98 to 5.95 in/hr)\n\n\nTemo-Witefels complex\ngravelly loamy coarse sand\nexcessively drained/ somewhat excessively drained\nmoderately low to moderately high\n(0.01 to 1.42 in/hr)\n\n\nDagget\nvery gravelly loamy coarse sand\nexcessively drained\nmoderately low to moderately high (0.01 to 1.42 in/hr)\n\n\nWhitell-Jobsis-Rock outcrop complex\nvery cobbly loamy coarse sand, gravelly loamy coarse sand, very gravelly coarse sand, extremely stony loamy coarse sand\nsomewhat excessively drained\nmoderately low to moderately high\n(0.01 to 1.42 in/hr)"
  },
  {
    "objectID": "projects.html#watershed-analysis",
    "href": "projects.html#watershed-analysis",
    "title": "Trout Creek Watershed",
    "section": "Watershed Analysis",
    "text": "Watershed Analysis\nDischarge data for USGS-10336780, the Trout Creek stream gauge, spans water years 1961-2023. Discharge minimum, maximum, mean, and standard deviation are all higher in the restoration group than in the pre-restoration group, indicating greater discharge variability (Table 3). The restoration period saw the highest daily discharge on January 2, 1997, at 12.80 mm (Figure 2). The highest annual discharge occurred in 2017, totaling 152.80 mm (Table 3). Discharge exceedance probability (p) shows slightly higher low and high flows in the restoration group compared to the pre-restoration group (Figure 3).\nPrecipitation, grass reference evapotranspiration, snow water equivalent, and soil moisture at a depth of 10-40 cm were downloaded from climateengine.org for water years 1981-2023. The watershed is semi-arid with an average annual precipitation of 895.91 mm. Mean annual precipitation increased slightly from 888.26 mm pre-restoration to 899.96 mm in the restoration period. Mean annual discharge also increased slightly from 337.80 mm pre-restoration to 357.09 mm post-restoration. Mean annual evapotranspiration increased from 1083.18 mm pre-restoration to 1153.28 mm post-restoration. In contrast, both mean annual snow water equivalent and soil moisture decreased from the pre-restoration to the restoration group. Snow water equivelent dropped from 311.69 mm to 297.45 mm, and soil moisture dropped from 50.04 mm to 48.83 mm. Annual trends show that evapotranspiration increased, while soil moisture decreased from 1981 to 2023 (Figure 4).\nThree notable years occurred: 1983, 2017, and 2021. In 1983, the watershed recorded the highest annual average soil moisture (54.59 mm) and the lowest annual average evapotranspiration (941.37 mm). In 2017, the watershed experienced the highest recorded annual discharge (1052.80 mm) and precipitation (1888.09 mm). In 2021, the watershed recorded the lowest annual soil moisture (42.91 mm) and the highest annual evapotranspiration (1250.37 mm).\nMonthly trends show that precipitation is elevated from October through April, with a decline from May through September (Figure 6). Snow accumulates during winter, with snowmelt typically occurring between April and July. Soil moisture decreases during the spring and summer months, continuing through August and September, before increasing with higher precipitation in winter. Discharge peaks from March through August, typically in May or June. Evapotranspiration is lowest in December and January, gradually increasing and peaking in July, before gradually declining. Evapotranspiration rises in warmer months and declines in the winter months.\n\nTable 3: Annual mean, maximum, minimum, and standard deviation for discharge (Q) of Trout Creek for the pre-restoration period (water years 1961-1995) and restoration period (1996-2023).\n\n\n\n\n\n\n\n\nPeriod\nMax Q\nMin Q\nStandard Deviation\n\n\nPre restoration\n801.80\n95.88\n182.50\n\n\nRestoration\n1052.80\n108.22\n240.12"
  },
  {
    "objectID": "projects.html#conclusions",
    "href": "projects.html#conclusions",
    "title": "Trout Creek Watershed",
    "section": "Conclusions",
    "text": "Conclusions\nThe restoration period shows increased variability in discharge compared to the pre-restoration period. This change appears to correlate more strongly with variations in precipitation than with the restoration efforts. Seasonal and annual trends suggest that precipitation and snowpack strongly influence streamflow. The observed increases in average precipitation, discharge and reference evapotranspiration, coupled with decreases in snow water equivalent and soil moisture suggest that climate variability may be driving hydrologic changes in the watershed. The most prominent trends from water years 1981 through 2023 are the consistent decrease in soil moisture and the increase in reference evapotranspiration, indicating increasing aridity in the watershed. Additionally, greater climatic variability is observed during the restoration period, with both higher and lower precipitation values, which contribute to increased fluctuations in snow water equivalent and discharge. These patterns may be influenced by more dramatic climate-driven weather patterns, which may amplify seasonal and annual variability in hydraulic conditions of Trout Creek watershed. Record high annual evapotranspiration and low soil moisture correlate to the Caldor fire, which burned through parts of the watershed in 2021."
  },
  {
    "objectID": "projects.html#sources",
    "href": "projects.html#sources",
    "title": "Trout Creek Watershed",
    "section": "Sources",
    "text": "Sources\nCalifornia Tahoe Conservancy. (2022). Greater Upper Truckee Watershed Restoration Accomplishments and Opportunities. https://tahoe.ca.gov/programs/water-quality-watersheds/\nTRCD. (2013). Conservation Projects and Environmental Improvement Projects (EIPs) in the Trout-Cold Creek Community Watershed. Tahoe Resource Conservation District. https://tahoercd.org/ wp-content/uploads/2013/03/Conservation-Projects-Trout-and-Cold-Creek.pdf\nUSGS. (2024). StreamStats. https://streamstats.usgs.gov/ss/\nUSDA. (2024). Web Soil Survey. https://websoilsurvey.sc.egov.usda.gov/App/WebSoilSurvey.aspx"
  },
  {
    "objectID": "projects.html#figures",
    "href": "projects.html#figures",
    "title": "Trout Creek Watershed",
    "section": "Figures",
    "text": "Figures\n\n\nCode\n# Install and load necessary packages\nsource('data/setup.R')\n\n# Create a table for stream gauge\ntrout_creek_table &lt;- tibble(site_no = '10336780', gauge = 'Trout Creek')\n\n# Get data from USGS\ntrout_creek &lt;- readNWISdv(\n  siteNumber = trout_creek_table$site_no,\n  parameterCd = '00060',\n  startDate = \"1960-10-01\",\n  endDate = \"2024-09-30\"\n) %&gt;%\n  renameNWISColumns() %&gt;%\n  left_join(trout_creek_table, by = 'site_no') %&gt;%\n  select(-'Flow_cd')\n\n# Convert discharge from cfs to mm/day (drainage area is 36.7 square miles)\ntrout_creek &lt;- trout_creek %&gt;%\n  mutate(Q_mm = Flow * 86400 / 36.7 / 5280 / 5280 * 304.8)\n\n# Calculate water years\ntrout_creek &lt;- trout_creek %&gt;%\n  mutate(\n    month = month(Date),\n    wyear = if_else(month &gt; 9, year(Date) + 1, year(Date))\n  )\n\n# Separate into periods to analyze: the pre-restoration period is before 1996.\n# The restoration period is equal to and following 1996.\n# Calculate annual totals for Q\nQ_annual &lt;- trout_creek %&gt;%\n  mutate(group = ifelse(wyear &lt; 1996, \"pre-restoration\", \"restoration\")) %&gt;%\n  group_by(group, wyear) %&gt;%\n  summarize(Q_mm = sum(Q_mm), count = n())\n\n# Graph annual discharge with a scatter plot\nQ &lt;- Q_annual %&gt;%\n  ggplot(mapping = aes(x = wyear, y = Q_mm, color = group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"Annual Q (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\nggplotly()\n\n\n\n\nFigure 1: Annual discharge for Trout Creek watershed for water years 1961-2023.\n\n\n\n\nCode\n# Graph annual discharge with a box plot\nQ_box &lt;- Q_annual %&gt;%\n  ggplot(mapping = aes(x = group, y = Q_mm, fill = group)) +\n  geom_boxplot() +\n  theme_bw() +\n  labs(x = \"\", y = 'Q (mm)') +\n  guides(fill = guide_legend(title = NULL))\n\n# Graph annual discharge with a violin plot\nQ_violin &lt;- Q_annual %&gt;%\n  ggplot(mapping = aes(x = group, y = Q_mm, fill = group)) +\n  geom_violin() +\n  theme_bw() +\n  labs(x = \"\", y = 'Q (mm)') +\n  guides(fill = guide_legend(title = NULL))\n\n# Plot daily discharge\nQ_daily &lt;- trout_creek %&gt;%\n  mutate(group = ifelse(wyear &lt; 1996, \"pre-restoration\", \"restoration\")) %&gt;%\n  ggplot(mapping = aes(x = wyear, y = Q_mm, color = group)) +\n  geom_line() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"Daily Q (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n# Stitch plots together\nggarrange(Q_violin, Q_box, Q_daily, Q, ncol = 2, nrow = 2, common.legend = TRUE, legend = \"bottom\")\n\n\n\n\n\nFigure 2: Annual, daily, and total sum discharge for Trout Creek for water years 1960-2023.\n\n\n\n\n\n\nCode\n#Calculate flow duration curve:\n#exceedance probability (p) = rank/n+1\npre_restoration &lt;- trout_creek %&gt;%\n  filter(wyear &lt; 1996) %&gt;%\n  mutate(\n    group='pre-restoration',\n    rank=rank(Flow),\n    p=rank/12784 \n  )\n\nrestoration &lt;- trout_creek %&gt;%\n  filter(wyear &gt;= 1996) %&gt;%\n  mutate(\n    group='restoration',\n    rank=rank(Flow),\n    p=rank/10594 \n  )\n\nfdc=rbind(pre_restoration,restoration)\n\n#Plot fcd\nfdc_plot &lt;- fdc %&gt;%\n  ggplot(mapping=aes(x=p,y=Flow,color=group, linetype=group))+\n  geom_line()+\n  theme_bw()+\n  labs(x = \"Exceedance Probability (p)\",y = \"Flow (cfs)\") +\n  guides(color = guide_legend(title = NULL),\n         linetype = guide_legend(title = NULL))\n\nggplotly()\n\n\n\n\nFigure 3: Discharge(Q) exceedance probability (p) for Trout Creek watershed for water years 1961-2023.\n\n\n\n\nCode\n#Plot fdc scale_y_log10() to better visualize data\n#Optional: can put limits within the log; example: scale_y_log10(100,1000)\nfdc_plot_log &lt;- fdc %&gt;%\n  ggplot(mapping=aes(x=p,y=Flow,color=group, linetype=group))+\n  scale_y_log10()+\n  geom_line()+\n  theme_bw()+\n  labs(x = \"Exceedance Probability (p)\",y = \"Flow (cfs) - Log 10\") +\n  guides(color = guide_legend(title = NULL),\n         linetype = guide_legend(title = NULL))\n\nggplotly()\n\n\n\n\nFigure 4: Discharge(Q) exceedance probability (p) at Log 10 for Trout Creek watershed for water years 1961-2023.\n\n\n\n\nCode\n# Read CSV files for P, ET, SM, and SWE:\nP_TC &lt;- read.csv('data/TC_Precip_Gridmet.csv')\nET_TC &lt;- read.csv('data/TC_ET_Gridmet.csv')\nSM_TC &lt;- read.csv('data/TC_SM_10_40_Wildas.csv')\nSWE_TC &lt;- read.csv('data/TC_SWE_Wildas.csv')\n\n# Filter Q_1981 based on the year range\nQ_1981 &lt;- trout_creek %&gt;%\n  filter(wyear &gt;= 1981 & wyear &lt;= 2023)\n\n# Convert Date Format\nP_TC$Date = mdy(P_TC$Date)\n\n# Join P_TC with Q_1981\nP_TC &lt;- P_TC %&gt;%\n  left_join(Q_1981 %&gt;% select(Date, Q_mm, wyear), by = \"Date\")\n\n# Bind Other Variables\nP_TC$ET_mm = ET_TC$ET_mm\nP_TC$SM_mm = SM_TC$SM_mm\nP_TC$SWE_mm = SWE_TC$SWE_mm\n\n#Separate Pre-restoration and Restoration Periods\nTC_climate &lt;- P_TC %&gt;%\n  mutate(\n    group = case_when(\n      wyear &lt; 1996 ~ \"pre-restoration\",\n      wyear &gt;= 1996 ~ \"restoration\"))\n\n\n#Calculate Annual Trends\nclimate_annual &lt;- suppressMessages(TC_climate %&gt;%\n  group_by(wyear,group) %&gt;%\n  summarize(P_mm=sum(P_mm),\n            Q_mm=sum(Q_mm),\n            ET_mm=sum(ET_mm),\n            peakSWE=max(SWE_mm),\n            meanSM=mean(SM_mm),\n            ))\n\n#Plot Annual Sum Q\nQ_1981 &lt;- Q_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=Q_mm,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"Q (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Sum P\nP &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=P_mm,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"P (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Sum ET\nET &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=ET_mm,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"ET (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Peak SWE\nSWE &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=peakSWE,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"SWE (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\n#Plot Annual Mean SM\nSM &lt;- climate_annual %&gt;%\n  ggplot(mapping=aes(x=wyear,y=meanSM,color=group)) +\n  geom_point() +\n  theme_bw() + \n  labs(x = \"Water Year\", y = \"SM (mm)\", color = \"Group\") +\n  guides(color = guide_legend(title = NULL))\n\nggarrange(P,ET,SWE,SM,Q_1981, ncol=2,nrow=3, common.legend = TRUE, legend = \"bottom\")\n\n\n\n\n\nFigure 5: Annual sum for precipitation(P), grass reference evapotranspiration(ET), and discharge (Q). Annual peak snow water equivalent(SWE). Annual mean soil moisture(SM). Values for water years 1980-2023.\n\n\n\n\n\n\nCode\n#Calculate monthly mean for P, Q, ET, SWE, and SM. For the flux variables P, Q and ET, calculate monthly sums before averaging: \nmonthly_mean_flux &lt;- suppressMessages(TC_climate %&gt;%\n  mutate(month=month(Date)) %&gt;%\n  group_by(month, group, wyear) %&gt;%\n  summarize(\n    Q_mm_sum = sum(Q_mm),\n    P_mm_sum = sum(P_mm),\n    ET_mm_sum = sum(ET_mm)) %&gt;%\n   summarize(\n    Q_mm = mean(Q_mm_sum),\n    P_mm = mean(P_mm_sum),\n    ET_mm = mean(ET_mm_sum)))\n\nmonthly_mean_stock &lt;- suppressMessages(TC_climate %&gt;%\n  mutate(month=month(Date)) %&gt;%\n  group_by(month,group) %&gt;%\n  summarize(\n    SWE_mm = mean(SWE_mm),\n    SM_mm = mean(SM_mm)))\n\n#Plot Mean Monthly SWE\nSWE_mean_plot &lt;- monthly_mean_stock %&gt;%\n  ggplot(mapping = aes(x = month, y = SWE_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"SWE (mm)\", color = \"Group\", linetype = \"Group\")\n\n#Plot Mean Monthly ET\nET_mean_plot &lt;- monthly_mean_flux %&gt;%\n  ggplot(mapping = aes(x = month, y = ET_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"ET (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\n#Plot Mean Monthly SM\nSM_mean_plot &lt;- monthly_mean_stock %&gt;%\n  ggplot(mapping = aes(x = month, y = SM_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"SM (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\n#Plot Mean Monthly P\nP_mean_plot &lt;- monthly_mean_flux %&gt;%\n  ggplot(mapping = aes(x = month, y = P_mm, color = group, linetype = group)) + \n  geom_line() +\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"P (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\n#Plot Mean Monthly Q\nQ_mean_plot &lt;- monthly_mean_flux %&gt;%\n  ggplot(mapping=aes(x=month,y=Q_mm,color=group, linetype = group)) +\n  geom_line()+\n  scale_x_continuous(breaks = 1:12) + \n  theme_bw() + \n  labs(x = \"Month\", y = \"Q (mm)\", color = \"Group\", linetype = \"Group\") +\n  guides(color = guide_legend(title = NULL), linetype = guide_legend(title = NULL))\n\nggarrange(\n  P_mean_plot, ET_mean_plot, Q_mean_plot, SM_mean_plot, SWE_mean_plot, \n  ncol = 2, nrow = 3,\n  common.legend = TRUE,  \n  legend = \"bottom\")\n\n\n\n\n\nFigure 6: Monthly averages for Trout Creek watershed for water years 1961 – 2023. Mean monthly sums for precipitation(P), grass reference evapotranspiration(ET), and discharge (Q). Mean monthly snow water equivalent(SWE) and soil moisture(SM)."
  }
]